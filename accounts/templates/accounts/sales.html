{% extends 'template.html' %}
{% block body %}

{% if detail_sales %}

<h1>Detalles de {{customer.name}}</h1>

<div class="buttons">
    <button type="button" class="btn btn-primary">Primary</button>
    <button type="button" class="btn btn-secondary">Secondary</button>
    <button type="button" class="btn btn-success">Success</button>
    <button type="button" class="btn btn-danger">Danger</button>
    <button type="button" class="btn btn-warning">Warning</button>
    <button type="button" class="btn btn-info">Info</button>
    <button type="button" class="btn btn-light">Light</button>
    <button type="button" class="btn btn-dark">Dark</button>

    <button type="button" class="btn btn-link">Link</button>
</div>

<section class="activas">
    <div class="header">
        <h4 class="modal-title">Cuentas Activas</h4>
    </div>
    <div class="body">
        {% for detail in detail_sales %}
        {% if detail.expiration_date|date:"d-M-Y" > today|date:"d-M-Y" %}
        <div class="detail">
            <div class="account">
                <span>Cuenta:</span>
                <p>{{detail.account_id.account_name_id}}</p>
            </div>
            <div class="username">
                <span>Username:</span>
                <p>{{detail.account_id.email}}
                    {% if detail.account_id.renovable == True %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-star-fill gold" viewBox="0 0 16 16">
                        <path
                            d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                    </svg>
                    {% endif %}
                </p>
            </div>
            <div class="password">
                <span>Password:</span>
                <p>{{detail.account_id.password}}</p>
            </div>
            <div class="perfil">
                <span>Perfil:</span>
                <p>{{detail.account_id.profile}}</p>
            </div>
            <div class="pin">
                <span>Pin:</span>
                <p>{{detail.account_id.pin}}</p>
            </div>
            <div class="expiration_customer">
                <span>Vencimiento Cliente:</span>
                <p>{{detail.expiration_date|date:'d-M-Y' }}</p>
            </div>
            <div class="expiration_account">
                <span>Vencimiento Cuenta:</span>
                <p>{{detail.account_id.expiration_date|date:'d-M-Y'}}</p>
            </div>

        </div>

        <div class="footer">
            <button class="btn btn-secondary">Editar</button>
            <button class="btn btn-secondary">Copiar</button>
            <button class="btn btn-secondary">Renovar</button>
        </div>
        {% elif not detail.expiration_date|date:"d-M-Y" > today|date:"d-M-Y" %}
            <h4>No hay cuentas activas</h4>
        {% endif %}
        {% endfor %}

    </div>
    </div>
</section>


<section class="inactivas">
    <div class="header">
        <h4 class="modal-title">Cuentas Inactivas</h4>
    </div>
    <div class="body">
        {% for detail in detail_sales %}
        {% if detail.expiration_date|date:"d-M-Y" <= today|date:"d-M-Y" %}
        <div class="detail">
            <div class="account">
                <span>Cuenta:</span>
                <p>{{detail.account_id.account_name_id}}</p>
            </div>
            <div class="username">
                <span>Username:</span>
                <p>{{detail.account_id.email}}
                    {% if detail.account_id.renovable == True %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-star-fill gold" viewBox="0 0 16 16">
                        <path
                            d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                    </svg>
                    {% endif %}
                </p>
            </div>
            <div class="password">
                <span>Password:</span>
                <p>{{detail.account_id.password}}</p>
            </div>
            <div class="perfil">
                <span>Perfil:</span>
                <p>{{detail.account_id.profile}}</p>
            </div>
            <div class="pin">
                <span>Pin:</span>
                <p>{{detail.account_id.pin}}</p>
            </div>
            <div class="expiration_customer">
                <span>Vencimiento Cliente:</span>
                <p>{{detail.expiration_date|date:'d-M-Y' }}</p>
            </div>
            <div class="expiration_account">
                <span>Vencimiento Cuenta:</span>
                <p>{{detail.account_id.expiration_date|date:'d-M-Y'}}</p>
            </div>

        </div>

        <div class="footer">
            <button class="btn btn-secondary">Editar</button>
            <button class="btn btn-secondary">Copiar</button>
            <button class="btn btn-secondary">Renovar</button>
        </div>
        {% else %}
        <h4>No hay cuentas inactivas</h4>
        {% endif %}
        {% endfor %}

    </div>
    </div>
</section>

{% elif error_message %}
<div aria-live="polite" aria-atomic="true" class="position-relative">
    <div class="toast-container top-0 end-0">
        <div class="toast">
            <div class="toast-header text-bg-danger">
                <strong class="me-auto ">ALERTA</strong>
                <small>ahora</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                {{error_message}}
            </div>
        </div>
    </div>
</div>

{% endif %}
{% endblock body %}

{% block extrajs %}
<script>
    $(document).ready(function () {
        $('.toast').toast('show');
    });
</script>
{% endblock extrajs %}